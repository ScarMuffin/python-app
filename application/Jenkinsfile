



node ('jenkins-docker'){
    checkout scm
     stage('Initialize'){
//        def dockerHome = tool 'myDocker'
//        env.PATH = "${dockerHome}/bin:${env.PATH}"
    }
    stage('Building image') {
       container('docker') {
           docker.withRegistry('https://sashok.jfrog.io, 'jfrog') 
                               {
        //docker.withRegistrywithDockerRegistry(registry: [url: 'https://sashok.jfrog.io', credentialsId: 'jfrog']) {

            def dockerfile = 'Dockerfile'
            def customImage = docker.build("sashokpy:${env.BUILD_ID}", "-f ${dockerfile} ./application") 
                               }
     //  customImage.push()
       }
//    def dockerfile = 'Dockerfile'
//    def customImage = docker.build("my-image:${env.BUILD_ID}", "-f ${dockerfile} ./") 
    }
}
   // docker.withRegistry('https://sashok.jfrog.io/default-docker-virtual/', 'jfrog') {

  //  def customImage = docker.build("my-image:${env.BUILD_ID}", "-f Dockerfile ./application")
